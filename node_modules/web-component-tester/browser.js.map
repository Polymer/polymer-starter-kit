{"version":3,"file":"browser.js.map","sources":["browser/util.js","browser/childrunner.js","browser/config.js","browser/suites.js","browser/reporters/console.js","browser/reporters/html.js","browser/reporters/multi.js","browser/reporters/title.js","browser/reporters.js","browser/environment.js","browser/environment/errors.js","browser/mocha/extend.js","browser/mocha/fixture.js","browser/mocha/stub.js","browser/mocha/replace.js","browser/mocha.js","browser/clisocket.js","browser/environment/helpers.js","browser/index.js"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport * as config from './config.js';\n\n/**\n * @param {function()} callback A function to call when the active web component\n *     frameworks have loaded.\n */\nexport function whenFrameworksReady(callback) {\n  debug('whenFrameworksReady');\n  var done = function() {\n    debug('whenFrameworksReady done');\n    callback();\n  };\n\n  function whenWebComponentsReady() {\n    debug('WebComponentsReady?');\n    if (window.WebComponents && WebComponents.whenReady) {\n      WebComponents.whenReady(function() {\n        debug('WebComponents Ready');\n        done();\n      });\n    } else {\n      var after = function after() {\n        window.removeEventListener('WebComponentsReady', after);\n        debug('WebComponentsReady');\n        done();\n      };\n      window.addEventListener('WebComponentsReady', after);\n    }\n  }\n\n  function importsReady() {\n    // handle Polymer 0.5 readiness\n    debug('Polymer ready?');\n    if (window.Polymer && Polymer.whenReady) {\n      Polymer.whenReady(function() {\n        debug('Polymer ready');\n        done();\n      });\n    } else {\n      whenWebComponentsReady();\n    }\n  }\n\n  // All our supported framework configurations depend on imports.\n  if (!window.HTMLImports) {\n    done();\n  } else if (HTMLImports.ready) {\n    debug('HTMLImports ready');\n    importsReady();\n  } else if (HTMLImports.whenReady) {\n    HTMLImports.whenReady(function() {\n      debug('HTMLImports.whenReady ready');\n      importsReady();\n    });\n  } else {\n    whenWebComponentsReady();\n  }\n}\n\n/**\n * @param {number} count\n * @param {string} kind\n * @return {string} '<count> <kind> tests' or '<count> <kind> test'.\n */\nexport function pluralizedStat(count, kind) {\n  if (count === 1) {\n    return count + ' ' + kind + ' test';\n  } else {\n    return count + ' ' + kind + ' tests';\n  }\n}\n\n/**\n * @param {string} path The URI of the script to load.\n * @param {function} done\n */\nexport function loadScript(path, done) {\n  var script = document.createElement('script');\n  script.src = path;\n  if (done) {\n    script.onload = done.bind(null, null);\n    script.onerror = done.bind(null, 'Failed to load script ' + script.src);\n  }\n  document.head.appendChild(script);\n}\n\n/**\n * @param {string} path The URI of the stylesheet to load.\n * @param {function} done\n */\nexport function loadStyle(path, done) {\n  var link = document.createElement('link');\n  link.rel  = 'stylesheet';\n  link.href = path;\n  if (done) {\n    link.onload = done.bind(null, null);\n    link.onerror = done.bind(null, 'Failed to load stylesheet ' + link.href);\n  }\n  document.head.appendChild(link);\n}\n\n/**\n * @param {...*} var_args Logs values to the console when the `debug`\n *     configuration option is true.\n */\nexport function debug(var_args) {\n  if (!config.get('verbose')) return;\n  var args = [window.location.pathname];\n  args.push.apply(args, arguments);\n  (console.debug || console.log).apply(console, args);\n}\n\n// URL Processing\n\n/**\n * @param {string} url\n * @return {{base: string, params: string}}\n */\nexport function parseUrl(url) {\n  var parts = url.match(/^(.*?)(?:\\?(.*))?$/);\n  return {\n    base:   parts[1],\n    params: getParams(parts[2] || ''),\n  };\n}\n\n/**\n * Expands a URL that may or may not be relative to `base`.\n *\n * @param {string} url\n * @param {string} base\n * @return {string}\n */\nexport function expandUrl(url, base) {\n  if (!base) return url;\n  if (url.match(/^(\\/|https?:\\/\\/)/)) return url;\n  if (base.substr(base.length - 1) !== '/') {\n    base = base + '/';\n  }\n  return base + url;\n}\n\n/**\n * @param {string=} opt_query A query string to parse.\n * @return {!Object<string, !Array<string>>} All params on the URL's query.\n */\nexport function getParams(opt_query) {\n  var query = typeof opt_query === 'string' ? opt_query : window.location.search;\n  if (query.substring(0, 1) === '?') {\n    query = query.substring(1);\n  }\n  // python's SimpleHTTPServer tacks a `/` on the end of query strings :(\n  if (query.slice(-1) === '/') {\n    query = query.substring(0, query.length - 1);\n  }\n  if (query === '') return {};\n\n  var result = {};\n  query.split('&').forEach(function(part) {\n    var pair = part.split('=');\n    if (pair.length !== 2) {\n      console.warn('Invalid URL query part:', part);\n      return;\n    }\n    var key   = decodeURIComponent(pair[0]);\n    var value = decodeURIComponent(pair[1]);\n\n    if (!result[key]) {\n      result[key] = [];\n    }\n    result[key].push(value);\n  });\n\n  return result;\n}\n\n/**\n * Merges params from `source` into `target` (mutating `target`).\n *\n * @param {!Object<string, !Array<string>>} target\n * @param {!Object<string, !Array<string>>} source\n */\nexport function mergeParams(target, source) {\n  Object.keys(source).forEach(function(key) {\n    if (!(key in target)) {\n      target[key] = [];\n    }\n    target[key] = target[key].concat(source[key]);\n  });\n}\n\n/**\n * @param {string} param The param to return a value for.\n * @return {?string} The first value for `param`, if found.\n */\nexport function getParam(param) {\n  var params = getParams();\n  return params[param] ? params[param][0] : null;\n}\n\n/**\n * @param {!Object<string, !Array<string>>} params\n * @return {string} `params` encoded as a URI query.\n */\nexport function paramsToQuery(params) {\n  var pairs = [];\n  Object.keys(params).forEach(function(key) {\n    params[key].forEach(function(value) {\n      pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    });\n  });\n  return (pairs.length > 0) ? ('?' + pairs.join('&')) : '';\n}\n\n/**\n * @param {!Location|string} location\n * @return {string}\n */\nexport function basePath(location) {\n  return (location.pathname || location).match(/^.*\\//)[0];\n}\n\n/**\n * @param {!Location|string} location\n * @param {string} basePath\n * @return {string}\n */\nexport function relativeLocation(location, basePath) {\n  var path = location.pathname || location;\n  if (path.indexOf(basePath) === 0) {\n    path = path.substring(basePath.length);\n  }\n  return path;\n}\n\n/**\n * @param {!Location|string} location\n * @return {string}\n */\nexport function cleanLocation(location) {\n  var path = location.pathname || location;\n  if (path.slice(-11) === '/index.html') {\n    path = path.slice(0, path.length - 10);\n  }\n  return path;\n}\n\n/**\n * Like `async.parallelLimit`, but our own so that we don't force a dependency\n * on downstream code.\n *\n * @param {!Array<function(function(*))>} runners Runners that call their given\n *     Node-style callback when done.\n * @param {number|function(*)} limit Maximum number of concurrent runners.\n *     (optional).\n * @param {?function(*)} done Callback that should be triggered once all runners\n *     have completed, or encountered an error.\n */\nexport function parallel(runners, limit, done) {\n  if (typeof limit !== 'number') {\n    done  = limit;\n    limit = 0;\n  }\n  if (!runners.length) return done();\n\n  var called    = false;\n  var total     = runners.length;\n  var numActive = 0;\n  var numDone   = 0;\n\n  function runnerDone(error) {\n    if (called) return;\n    numDone = numDone + 1;\n    numActive = numActive - 1;\n\n    if (error || numDone >= total) {\n      called = true;\n      done(error);\n    } else {\n      runOne();\n    }\n  }\n\n  function runOne() {\n    if (limit && numActive >= limit) return;\n    if (!runners.length) return;\n    numActive = numActive + 1;\n    runners.shift()(runnerDone);\n  }\n  runners.forEach(runOne);\n}\n\n/**\n * Finds the directory that a loaded script is hosted on.\n *\n * @param {string} filename\n * @return {string?}\n */\nexport function scriptPrefix(filename) {\n  var scripts = document.querySelectorAll('script[src*=\"' + filename + '\"]');\n  if (scripts.length !== 1) return null;\n  var script = scripts[0].src;\n  return script.substring(0, script.indexOf(filename));\n}\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nimport * as util from './util.js';\n\n// TODO(thedeeno): Consider renaming subsuite. IIRC, childRunner is entirely\n// distinct from mocha suite, which tripped me up badly when trying to add\n// plugin support. Perhaps something like 'batch', or 'bundle'. Something that\n// has no mocha correlate. This may also eliminate the need for root/non-root\n// suite distinctions.\n\n/**\n * A Mocha suite (or suites) run within a child iframe, but reported as if they\n * are part of the current context.\n */\nexport default function ChildRunner(url, parentScope) {\n  var urlBits = util.parseUrl(url);\n  util.mergeParams(\n      urlBits.params, util.getParams(parentScope.location.search));\n  delete urlBits.params.cli_browser_id;\n\n  this.url         = urlBits.base + util.paramsToQuery(urlBits.params);\n  this.parentScope = parentScope;\n\n  this.state = 'initializing';\n}\n\n// ChildRunners get a pretty generous load timeout by default.\nChildRunner.loadTimeout = 60000;\n\n// We can't maintain properties on iframe elements in Firefox/Safari/???, so we\n// track childRunners by URL.\nChildRunner._byUrl = {};\n\n/**\n * @return {ChildRunner} The `ChildRunner` that was registered for this window.\n */\nChildRunner.current = function() {\n  return ChildRunner.get(window);\n};\n\n/**\n * @param {!Window} target A window to find the ChildRunner of.\n * @param {boolean} traversal Whether this is a traversal from a child window.\n * @return {ChildRunner} The `ChildRunner` that was registered for `target`.\n */\nChildRunner.get = function(target, traversal) {\n  var childRunner = ChildRunner._byUrl[target.location.href];\n  if (childRunner) return childRunner;\n  if (window.parent === window) {  // Top window.\n    if (traversal) {\n      console.warn('Subsuite loaded but was never registered. This most likely is due to wonky history behavior. Reloading...');\n      window.location.reload();\n    }\n    return null;\n  }\n  // Otherwise, traverse.\n  return window.parent.WCT._ChildRunner.get(target, true);\n};\n\n/**\n * Loads and runs the subsuite.\n *\n * @param {function} done Node-style callback.\n */\nChildRunner.prototype.run = function(done) {\n  util.debug('ChildRunner#run', this.url);\n  this.state = 'loading';\n  this.onRunComplete = done;\n\n  this.iframe = document.createElement('iframe');\n  this.iframe.src = this.url;\n  this.iframe.classList.add('subsuite');\n\n  var container = document.getElementById('subsuites');\n  if (!container) {\n    container = document.createElement('div');\n    container.id = 'subsuites';\n    document.body.appendChild(container);\n  }\n  container.appendChild(this.iframe);\n\n  // let the iframe expand the URL for us.\n  this.url = this.iframe.src;\n  ChildRunner._byUrl[this.url] = this;\n\n  this.timeoutId = setTimeout(\n      this.loaded.bind(this, new Error('Timed out loading ' + this.url)), ChildRunner.loadTimeout);\n\n  this.iframe.addEventListener('error',\n      this.loaded.bind(this, new Error('Failed to load document ' + this.url)));\n\n  this.iframe.contentWindow.addEventListener('DOMContentLoaded', this.loaded.bind(this, null));\n};\n\n/**\n * Called when the sub suite's iframe has loaded (or errored during load).\n *\n * @param {*} error The error that occured, if any.\n */\nChildRunner.prototype.loaded = function(error) {\n  util.debug('ChildRunner#loaded', this.url, error);\n\n  // Not all targets have WCT loaded (compatiblity mode)\n  if (this.iframe.contentWindow.WCT) {\n    this.share = this.iframe.contentWindow.WCT.share;\n  }\n\n  if (error) {\n    this.signalRunComplete(error);\n    this.done();\n  }\n};\n\n/**\n * Called in mocha/run.js when all dependencies have loaded, and the child is\n * ready to start running tests\n *\n * @param {*} error The error that occured, if any.\n */\nChildRunner.prototype.ready = function(error) {\n  util.debug('ChildRunner#ready', this.url, error);\n  if (this.timeoutId) {\n    clearTimeout(this.timeoutId);\n  }\n  if (error) {\n    this.signalRunComplete(error);\n    this.done();\n  }\n};\n\n/** Called when the sub suite's tests are complete, so that it can clean up. */\nChildRunner.prototype.done = function done() {\n  util.debug('ChildRunner#done', this.url, arguments);\n\n  // make sure to clear that timeout\n  this.ready();\n  this.signalRunComplete();\n\n  if (!this.iframe) return;\n  // Be safe and avoid potential browser crashes when logic attempts to interact\n  // with the removed iframe.\n  setTimeout(function() {\n    this.iframe.parentNode.removeChild(this.iframe);\n    this.iframe = null;\n  }.bind(this), 1);\n};\n\nChildRunner.prototype.signalRunComplete = function signalRunComplete(error) {\n  if (!this.onRunComplete) return;\n  this.state = 'complete';\n  this.onRunComplete(error);\n  this.onRunComplete = null;\n};\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nimport * as util from './util.js';\nimport ChildRunner from './childrunner.js';\n\n/**\n * The global configuration state for WCT's browser client.\n */\nexport var _config = {\n  /**\n   * `.js` scripts to be loaded (synchronously) before WCT starts in earnest.\n   *\n   * Paths are relative to `scriptPrefix`.\n   */\n  environmentScripts: [\n    'stacky/browser.js',\n    'async/lib/async.js',\n    'lodash/lodash.js',\n    'mocha/mocha.js',\n    'chai/chai.js',\n    'sinonjs/sinon.js',\n    'sinon-chai/lib/sinon-chai.js',\n    'accessibility-developer-tools/dist/js/axs_testing.js'\n  ],\n\n  environmentImports: [\n    'test-fixture/test-fixture.html'\n  ],\n\n  /** Absolute root for client scripts. Detected in `setup()` if not set. */\n  root: null,\n\n  /** By default, we wait for any web component frameworks to load. */\n  waitForFrameworks: true,\n\n  /** Alternate callback for waiting for tests.\n   * `this` for the callback will be the window currently running tests.\n   */\n  waitFor: null,\n\n  /** How many `.html` suites that can be concurrently loaded & run. */\n  numConcurrentSuites: 1,\n\n  /** Whether `console.error` should be treated as a test failure. */\n  trackConsoleError: true,\n\n  /** Configuration passed to mocha.setup. */\n  mochaOptions: {\n    timeout: 10 * 1000\n  },\n\n  /** Whether WCT should emit (extremely verbose) debugging log messages. */\n  verbose: false,\n};\n\n/**\n * Merges initial `options` into WCT's global configuration.\n *\n * @param {Object} options The options to merge. See `browser/config.js` for a\n *     reference.\n */\nexport function setup(options) {\n  var childRunner = ChildRunner.current();\n  if (childRunner) {\n    _deepMerge(_config, childRunner.parentScope.WCT._config);\n    // But do not force the mocha UI\n    delete _config.mochaOptions.ui;\n  }\n\n  if (options && typeof options === 'object') {\n    _deepMerge(_config, options);\n  }\n\n  if (!_config.root) {\n    // Sibling dependencies.\n    var root = util.scriptPrefix('browser.js');\n    _config.root = util.basePath(root.substr(0, root.length - 1));\n    if (!_config.root) {\n      throw new Error('Unable to detect root URL for WCT sources. Please set WCT.root before including browser.js');\n    }\n  }\n}\n\n/**\n * Retrieves a configuration value.\n *\n * @param {string} key\n * @return {*}\n */\nexport function get(key) {\n  return _config[key];\n}\n\n// Internal\n\nfunction _deepMerge(target, source) {\n  Object.keys(source).forEach(function(key) {\n    if (target[key] !== null && typeof target[key] === 'object' && !Array.isArray(target[key])) {\n      _deepMerge(target[key], source[key]);\n    } else {\n      target[key] = source[key];\n    }\n  });\n}\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nimport * as config from './config.js';\nimport * as util from './util.js';\nimport ChildRunner from './childrunner.js';\n\nexport var htmlSuites = [];\nexport var jsSuites   = [];\n\n// We process grep ourselves to avoid loading suites that will be filtered.\nvar GREP = util.getParam('grep');\n// work around mocha bug (https://github.com/mochajs/mocha/issues/2070)\nif (GREP) {\n  GREP = GREP.replace(/\\\\\\./g, '.');\n}\n\n/**\n * Loads suites of tests, supporting both `.js` and `.html` files.\n *\n * @param {!Array.<string>} files The files to load.\n */\nexport function loadSuites(files) {\n  files.forEach(function(file) {\n    if (/\\.js(\\?.*)?$/.test(file)) {\n      jsSuites.push(file);\n    } else if (/\\.html(\\?.*)?$/.test(file)) {\n      htmlSuites.push(file);\n    } else {\n      throw new Error('Unknown resource type: ' + file);\n    }\n  });\n}\n\n/**\n * @return {!Array.<string>} The child suites that should be loaded, ignoring\n *     those that would not match `GREP`.\n */\nexport function activeChildSuites() {\n  var subsuites = htmlSuites;\n  if (GREP) {\n    var cleanSubsuites = [];\n    for (var i = 0, subsuite; subsuite = subsuites[i]; i++) {\n      if (GREP.indexOf(util.cleanLocation(subsuite)) !== -1) {\n        cleanSubsuites.push(subsuite);\n      }\n    }\n    subsuites = cleanSubsuites;\n  }\n  return subsuites;\n}\n\n/**\n * Loads all `.js` sources requested by the current suite.\n *\n * @param {!MultiReporter} reporter\n * @param {function} done\n */\nexport function loadJsSuites(reporter, done) {\n  util.debug('loadJsSuites', jsSuites);\n\n  var loaders = jsSuites.map(function(file) {\n    // We only support `.js` dependencies for now.\n    return util.loadScript.bind(util, file);\n  });\n\n  util.parallel(loaders, done);\n}\n\n/**\n * @param {!MultiReporter} reporter\n * @param {!Array.<string>} childSuites\n * @param {function} done\n */\nexport function runSuites(reporter, childSuites, done) {\n  util.debug('runSuites');\n\n  var suiteRunners = [\n    // Run the local tests (if any) first, not stopping on error;\n    _runMocha.bind(null, reporter),\n  ];\n\n  // As well as any sub suites. Again, don't stop on error.\n  childSuites.forEach(function(file) {\n    suiteRunners.push(function(next) {\n      var childRunner = new ChildRunner(file, window);\n      reporter.emit('childRunner start', childRunner);\n      childRunner.run(function(error) {\n        reporter.emit('childRunner end', childRunner);\n        if (error) reporter.emitOutOfBandTest(file, error);\n        next();\n      });\n    });\n  });\n\n  util.parallel(suiteRunners, config.get('numConcurrentSuites'), function(error) {\n    reporter.done();\n    done(error);\n  });\n}\n\n/**\n * Kicks off a mocha run, waiting for frameworks to load if necessary.\n *\n * @param {!MultiReporter} reporter Where to send Mocha's events.\n * @param {function} done A callback fired, _no error is passed_.\n */\nfunction _runMocha(reporter, done, waited) {\n  if (config.get('waitForFrameworks') && !waited) {\n    var waitFor = (config.get('waitFor') || util.whenFrameworksReady).bind(window);\n    waitFor(_runMocha.bind(null, reporter, done, true));\n    return;\n  }\n  util.debug('_runMocha');\n  var mocha = window.mocha;\n  var Mocha = window.Mocha;\n\n  mocha.reporter(reporter.childReporter(window.location));\n  mocha.suite.title = reporter.suiteTitle(window.location);\n  mocha.grep(GREP);\n\n  // We can't use `mocha.run` because it bashes over grep, invert, and friends.\n  // See https://github.com/visionmedia/mocha/blob/master/support/tail.js#L137\n  var runner = Mocha.prototype.run.call(mocha, function(error) {\n    if (document.getElementById('mocha')) {\n      Mocha.utils.highlightTags('code');\n    }\n    done();  // We ignore the Mocha failure count.\n  });\n\n  // Mocha's default `onerror` handling strips the stack (to support really old\n  // browsers). We upgrade this to get better stacks for async errors.\n  //\n  // TODO(nevir): Can we expand support to other browsers?\n  if (navigator.userAgent.match(/chrome/i)) {\n    window.onerror = null;\n    window.addEventListener('error', function(event) {\n      if (!event.error) return;\n      if (event.error.ignore) return;\n      runner.uncaught(event.error);\n    });\n  }\n}\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nimport * as util from '../util.js';\n\n// We capture console events when running tests; so make sure we have a\n// reference to the original one.\nvar console = window.console;\n\nvar FONT = ';font: normal 13px \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;';\nvar STYLES = {\n  plain:   FONT,\n  suite:   'color: #5c6bc0' + FONT,\n  test:    FONT,\n  passing: 'color: #259b24' + FONT,\n  pending: 'color: #e65100' + FONT,\n  failing: 'color: #c41411' + FONT,\n  stack:   'color: #c41411',\n  results: FONT + 'font-size: 16px',\n};\n\n// I don't think we can feature detect this one...\nvar userAgent = navigator.userAgent.toLowerCase();\nvar CAN_STYLE_LOG   = userAgent.match('firefox') || userAgent.match('webkit');\nvar CAN_STYLE_GROUP = userAgent.match('webkit');\n// Track the indent for faked `console.group`\nvar logIndent = '';\n\nfunction log(text, style) {\n  text = text.split('\\n').map(function(l) { return logIndent + l; }).join('\\n');\n  if (CAN_STYLE_LOG) {\n    console.log('%c' + text, STYLES[style] || STYLES.plain);\n  } else {\n    console.log(text);\n  }\n}\n\nfunction logGroup(text, style) {\n  if (CAN_STYLE_GROUP) {\n    console.group('%c' + text, STYLES[style] || STYLES.plain);\n  } else if (console.group) {\n    console.group(text);\n  } else {\n    logIndent = logIndent + '  ';\n    log(text, style);\n  }\n}\n\nfunction logGroupEnd() {\n  if (console.groupEnd) {\n    console.groupEnd();\n  } else {\n    logIndent = logIndent.substr(0, logIndent.length - 2);\n  }\n}\n\nfunction logException(error) {\n  log(error.stack || error.message || error, 'stack');\n}\n\n/**\n * A Mocha reporter that logs results out to the web `console`.\n *\n * @param {!Mocha.Runner} runner The runner that is being reported on.\n */\nexport default function Console(runner) {\n  Mocha.reporters.Base.call(this, runner);\n\n  runner.on('suite', function(suite) {\n    if (suite.root) return;\n    logGroup(suite.title, 'suite');\n  }.bind(this));\n\n  runner.on('suite end', function(suite) {\n    if (suite.root) return;\n    logGroupEnd();\n  }.bind(this));\n\n  runner.on('test', function(test) {\n    logGroup(test.title, 'test');\n  }.bind(this));\n\n  runner.on('pending', function(test) {\n    logGroup(test.title, 'pending');\n  }.bind(this));\n\n  runner.on('fail', function(test, error) {\n    logException(error);\n  }.bind(this));\n\n  runner.on('test end', function(test) {\n    logGroupEnd();\n  }.bind(this));\n\n  runner.on('end', this.logSummary.bind(this));\n}\n\n/** Prints out a final summary of test results. */\nConsole.prototype.logSummary = function logSummary() {\n  logGroup('Test Results', 'results');\n\n  if (this.stats.failures > 0) {\n    log(util.pluralizedStat(this.stats.failures, 'failing'), 'failing');\n  }\n  if (this.stats.pending > 0) {\n    log(util.pluralizedStat(this.stats.pending, 'pending'), 'pending');\n  }\n  log(util.pluralizedStat(this.stats.passes, 'passing'));\n\n  if (!this.stats.failures) {\n    log('test suite passed', 'passing');\n  }\n  log('Evaluated ' + this.stats.tests + ' tests in ' + this.stats.duration + 'ms.');\n  logGroupEnd();\n};\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * WCT-specific behavior on top of Mocha's default HTML reporter.\n *\n * @param {!Mocha.Runner} runner The runner that is being reported on.\n */\nexport default function HTML(runner) {\n  var output = document.createElement('div');\n  output.id = 'mocha';\n  document.body.appendChild(output);\n\n  runner.on('suite', function(test) {\n    this.total = runner.total;\n  }.bind(this));\n\n  Mocha.reporters.HTML.call(this, runner);\n}\n\n// Woo! What a hack. This just saves us from adding a bunch of complexity around\n// style loading.\nvar style = document.createElement('style');\nstyle.textContent = 'html, body {' +\n                    '  position: relative;' +\n                    '  height: 100%;' +\n                    '  width:  100%;' +\n                    '  min-width: 900px;' +\n                    '}' +\n                    '#mocha, #subsuites {' +\n                    '  height: 100%;' +\n                    '  position: absolute;' +\n                    '  top: 0;' +\n                    '}' +\n                    '#mocha {' +\n                    '  box-sizing: border-box;' +\n                    '  margin: 0 !important;' +\n                    '  overflow-y: auto;' +\n                    '  padding: 60px 20px;' +\n                    '  right: 0;' +\n                    '  left: 500px;' +\n                    '}' +\n                    '#subsuites {' +\n                    '  -ms-flex-direction: column;' +\n                    '  -webkit-flex-direction: column;' +\n                    '  display: -ms-flexbox;' +\n                    '  display: -webkit-flex;' +\n                    '  display: flex;' +\n                    '  flex-direction: column;' +\n                    '  left: 0;' +\n                    '  width: 500px;' +\n                    '}' +\n                    '#subsuites .subsuite {' +\n                    '  border: 0;' +\n                    '  width: 100%;' +\n                    '  height: 100%;' +\n                    '}' +\n                    '#mocha .test.pass .duration {' +\n                    '  color: #555 !important;' +\n                    '}';\ndocument.head.appendChild(style);\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nimport * as util from '../util.js';\n\nvar STACKY_CONFIG = {\n  indent: '  ',\n  locationStrip: [\n    /^https?:\\/\\/[^\\/]+/,\n    /\\?.*$/,\n  ],\n  filter: function(line) {\n    return line.location.match(/\\/web-component-tester\\/[^\\/]+(\\?.*)?$/);\n  },\n};\n\n// https://github.com/visionmedia/mocha/blob/master/lib/runner.js#L36-46\nvar MOCHA_EVENTS = [\n  'start',\n  'end',\n  'suite',\n  'suite end',\n  'test',\n  'test end',\n  'hook',\n  'hook end',\n  'pass',\n  'fail',\n  'pending',\n  'childRunner end'\n];\n\n// Until a suite has loaded, we assume this many tests in it.\nvar ESTIMATED_TESTS_PER_SUITE = 3;\n\n/**\n * A Mocha-like reporter that combines the output of multiple Mocha suites.\n *\n * @param {number} numSuites The number of suites that will be run, in order to\n *     estimate the total number of tests that will be performed.\n * @param {!Array.<!Mocha.reporters.Base>} reporters The set of reporters that\n *     should receive the unified event stream.\n * @param {MultiReporter} parent The parent reporter, if present.\n */\nexport default function MultiReporter(numSuites, reporters, parent) {\n  this.reporters = reporters.map(function(reporter) {\n    return new reporter(this);\n  }.bind(this));\n\n  this.parent = parent;\n  this.basePath = parent && parent.basePath || util.basePath(window.location);\n\n  this.total = numSuites * ESTIMATED_TESTS_PER_SUITE;\n  // Mocha reporters assume a stream of events, so we have to be careful to only\n  // report on one runner at a time...\n  this.currentRunner = null;\n  // ...while we buffer events for any other active runners.\n  this.pendingEvents = [];\n\n  this.emit('start');\n}\n\n/**\n * @param {!Location|string} location The location this reporter represents.\n * @return {!Mocha.reporters.Base} A reporter-like \"class\" for each child suite\n *     that should be passed to `mocha.run`.\n */\nMultiReporter.prototype.childReporter = function childReporter(location) {\n  var name = this.suiteTitle(location);\n  // The reporter is used as a constructor, so we can't depend on `this` being\n  // properly bound.\n  var self = this;\n  function reporter(runner) {\n    runner.name = name;\n    self.bindChildRunner(runner);\n  }\n  reporter.title = name;\n  return reporter;\n};\n\n/** Must be called once all runners have finished. */\nMultiReporter.prototype.done = function done() {\n  this.complete = true;\n  this.flushPendingEvents();\n  this.emit('end');\n};\n\n/**\n * Emit a top level test that is not part of any suite managed by this reporter.\n *\n * Helpful for reporting on global errors, loading issues, etc.\n *\n * @param {string} title The title of the test.\n * @param {*} opt_error An error associated with this test. If falsy, test is\n *     considered to be passing.\n * @param {string} opt_suiteTitle Title for the suite that's wrapping the test.\n * @param {?boolean} opt_estimated If this test was included in the original\n *     estimate of `numSuites`.\n */\nMultiReporter.prototype.emitOutOfBandTest = function emitOutOfBandTest(title, opt_error, opt_suiteTitle, opt_estimated) {\n  util.debug('MultiReporter#emitOutOfBandTest(', arguments, ')');\n  var root = new Mocha.Suite();\n  root.title = opt_suiteTitle || '';\n  var test = new Mocha.Test(title, function() {\n  });\n  test.parent = root;\n  test.state  = opt_error ? 'failed' : 'passed';\n  test.err    = opt_error;\n\n  if (!opt_estimated) {\n    this.total = this.total + ESTIMATED_TESTS_PER_SUITE;\n  }\n\n  var runner = {total: 1};\n  this.proxyEvent('start', runner);\n  this.proxyEvent('suite', runner, root);\n  this.proxyEvent('test', runner, test);\n  if (opt_error) {\n    this.proxyEvent('fail', runner, test, opt_error);\n  } else {\n    this.proxyEvent('pass', runner, test);\n  }\n  this.proxyEvent('test end', runner, test);\n  this.proxyEvent('suite end', runner, root);\n  this.proxyEvent('end', runner);\n};\n\n/**\n * @param {!Location|string} location\n * @return {string}\n */\nMultiReporter.prototype.suiteTitle = function suiteTitle(location) {\n  var path = util.relativeLocation(location, this.basePath);\n  path = util.cleanLocation(path);\n  return path;\n};\n\n// Internal Interface\n\n/** @param {!Mocha.runners.Base} runner The runner to listen to events for. */\nMultiReporter.prototype.bindChildRunner = function bindChildRunner(runner) {\n  MOCHA_EVENTS.forEach(function(eventName) {\n    runner.on(eventName, this.proxyEvent.bind(this, eventName, runner));\n  }.bind(this));\n};\n\n/**\n * Evaluates an event fired by `runner`, proxying it forward or buffering it.\n *\n * @param {string} eventName\n * @param {!Mocha.runners.Base} runner The runner that emitted this event.\n * @param {...*} var_args Any additional data passed as part of the event.\n */\nMultiReporter.prototype.proxyEvent = function proxyEvent(eventName, runner, var_args) {\n  var extraArgs = Array.prototype.slice.call(arguments, 2);\n  if (this.complete) {\n    console.warn('out of order Mocha event for ' + runner.name + ':', eventName, extraArgs);\n    return;\n  }\n\n  if (this.currentRunner && runner !== this.currentRunner) {\n    this.pendingEvents.push(arguments);\n    return;\n  }\n  util.debug('MultiReporter#proxyEvent(', arguments, ')');\n\n  // This appears to be a Mocha bug: Tests failed by passing an error to their\n  // done function don't set `err` properly.\n  //\n  // TODO(nevir): Track down.\n  if (eventName === 'fail' && !extraArgs[0].err) {\n    extraArgs[0].err = extraArgs[1];\n  }\n\n  if (eventName === 'start') {\n    this.onRunnerStart(runner);\n  } else if (eventName === 'end') {\n    this.onRunnerEnd(runner);\n  } else {\n    this.cleanEvent(eventName, runner, extraArgs);\n    this.emit.apply(this, [eventName].concat(extraArgs));\n  }\n};\n\n/**\n * Cleans or modifies an event if needed.\n *\n * @param {string} eventName\n * @param {!Mocha.runners.Base} runner The runner that emitted this event.\n * @param {!Array.<*>} extraArgs\n */\nMultiReporter.prototype.cleanEvent = function cleanEvent(eventName, runner, extraArgs) {\n  // Suite hierarchy\n  if (extraArgs[0]) {\n    extraArgs[0] = this.showRootSuite(extraArgs[0]);\n  }\n\n  // Normalize errors\n  if (eventName === 'fail') {\n    extraArgs[1] = Stacky.normalize(extraArgs[1], STACKY_CONFIG);\n  }\n  if (extraArgs[0] && extraArgs[0].err) {\n    extraArgs[0].err = Stacky.normalize(extraArgs[0].err, STACKY_CONFIG);\n  }\n};\n\n/**\n * We like to show the root suite's title, which requires a little bit of\n * trickery in the suite hierarchy.\n *\n * @param {!Mocha.Runnable} node\n */\nMultiReporter.prototype.showRootSuite = function showRootSuite(node) {\n  var leaf = node = Object.create(node);\n  while (node && node.parent) {\n    var wrappedParent = Object.create(node.parent);\n    node.parent = wrappedParent;\n    node = wrappedParent;\n  }\n  node.root = false;\n\n  return leaf;\n};\n\n/** @param {!Mocha.runners.Base} runner */\nMultiReporter.prototype.onRunnerStart = function onRunnerStart(runner) {\n  util.debug('MultiReporter#onRunnerStart:', runner.name);\n  this.total = this.total - ESTIMATED_TESTS_PER_SUITE + runner.total;\n  this.currentRunner = runner;\n};\n\n/** @param {!Mocha.runners.Base} runner */\nMultiReporter.prototype.onRunnerEnd = function onRunnerEnd(runner) {\n  util.debug('MultiReporter#onRunnerEnd:', runner.name);\n  this.currentRunner = null;\n  this.flushPendingEvents();\n};\n\n/**\n * Flushes any buffered events and runs them through `proxyEvent`. This will\n * loop until all buffered runners are complete, or we have run out of buffered\n * events.\n */\nMultiReporter.prototype.flushPendingEvents = function flushPendingEvents() {\n  var events = this.pendingEvents;\n  this.pendingEvents = [];\n  events.forEach(function(eventArgs) {\n    this.proxyEvent.apply(this, eventArgs);\n  }.bind(this));\n};\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nimport * as util from '../util.js';\n\nvar ARC_OFFSET = 0; // start at the right.\nvar ARC_WIDTH  = 6;\n\n/**\n * A Mocha reporter that updates the document's title and favicon with\n * at-a-glance stats.\n *\n * @param {!Mocha.Runner} runner The runner that is being reported on.\n */\nexport default function Title(runner) {\n  Mocha.reporters.Base.call(this, runner);\n\n  runner.on('test end', this.report.bind(this));\n}\n\n/** Reports current stats via the page title and favicon. */\nTitle.prototype.report = function report() {\n  this.updateTitle();\n  this.updateFavicon();\n};\n\n/** Updates the document title with a summary of current stats. */\nTitle.prototype.updateTitle = function updateTitle() {\n  if (this.stats.failures > 0) {\n    document.title = util.pluralizedStat(this.stats.failures, 'failing');\n  } else {\n    document.title = util.pluralizedStat(this.stats.passes, 'passing');\n  }\n};\n\n/**\n * Draws an arc for the favicon status, relative to the total number of tests.\n *\n * @param {!CanvasRenderingContext2D} context\n * @param {number} total\n * @param {number} start\n * @param {number} length\n * @param {string} color\n */\nfunction drawFaviconArc(context, total, start, length, color) {\n  var arcStart = ARC_OFFSET + Math.PI * 2 * (start / total);\n  var arcEnd   = ARC_OFFSET + Math.PI * 2 * ((start + length) / total);\n\n  context.beginPath();\n  context.strokeStyle = color;\n  context.lineWidth   = ARC_WIDTH;\n  context.arc(16, 16, 16 - ARC_WIDTH / 2, arcStart, arcEnd);\n  context.stroke();\n}\n\n/** Updates the document's favicon w/ a summary of current stats. */\nTitle.prototype.updateFavicon = function updateFavicon() {\n  var canvas = document.createElement('canvas');\n  canvas.height = canvas.width = 32;\n  var context = canvas.getContext('2d');\n\n  var passing = this.stats.passes;\n  var pending = this.stats.pending;\n  var failing = this.stats.failures;\n  var total   = Math.max(this.runner.total, passing + pending + failing);\n  drawFaviconArc(context, total, 0,                 passing, '#0e9c57');\n  drawFaviconArc(context, total, passing,           pending, '#f3b300');\n  drawFaviconArc(context, total, pending + passing, failing, '#ff5621');\n\n  this.setFavicon(canvas.toDataURL());\n};\n\n/** Sets the current favicon by URL. */\nTitle.prototype.setFavicon = function setFavicon(url) {\n  var current = document.head.querySelector('link[rel=\"icon\"]');\n  if (current) {\n    document.head.removeChild(current);\n  }\n\n  var link = document.createElement('link');\n  link.rel = 'icon';\n  link.type = 'image/x-icon';\n  link.href = url;\n  link.setAttribute('sizes', '32x32');\n  document.head.appendChild(link);\n};\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nimport * as suites from './suites.js';\nimport ConsoleReporter from './reporters/console.js';\nimport HTMLReporter    from './reporters/html.js';\nimport MultiReporter   from './reporters/multi.js';\nimport TitleReporter   from './reporters/title.js';\n\nexport var htmlSuites = [];\nexport var jsSuites   = [];\n\n/**\n * @param {CLISocket} socket The CLI socket, if present.\n * @param {MultiReporter} parent The parent reporter, if present.\n * @return {!Array.<!Mocha.reporters.Base} The reporters that should be used.\n */\nexport function determineReporters(socket, parent) {\n  // Parents are greedy.\n  if (parent) {\n    return [parent.childReporter(window.location)];\n  }\n\n  // Otherwise, we get to run wild without any parental supervision!\n  var reporters = [TitleReporter, ConsoleReporter];\n\n  if (socket) {\n    reporters.push(function(runner) {\n      socket.observe(runner);\n    });\n  }\n\n  if (suites.htmlSuites.length > 0 || suites.jsSuites.length > 0) {\n    reporters.push(HTMLReporter);\n  }\n\n  return reporters;\n}\n\n/**\n * Yeah, hideous, but this allows us to be loaded before Mocha, which is handy.\n */\nexport function injectMocha(Mocha) {\n  _injectPrototype(ConsoleReporter, Mocha.reporters.Base.prototype);\n  _injectPrototype(HTMLReporter,    Mocha.reporters.HTML.prototype);\n  // Mocha doesn't expose its `EventEmitter` shim directly, so:\n  _injectPrototype(MultiReporter,   Object.getPrototypeOf(Mocha.Runner.prototype));\n}\n\nfunction _injectPrototype(klass, prototype) {\n  var newPrototype = Object.create(prototype);\n  // Only support\n  Object.keys(klass.prototype).forEach(function(key) {\n    newPrototype[key] = klass.prototype[key];\n  });\n\n  klass.prototype = newPrototype;\n}\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nimport * as config    from './config.js';\nimport * as reporters from './reporters.js';\nimport * as util      from './util.js';\n\n/**\n * Loads all environment scripts ...synchronously ...after us.\n */\nexport function loadSync() {\n  util.debug('Loading environment scripts:');\n  var a11ySuite = 'web-component-tester/data/a11ySuite.js';\n  var scripts = config.get('environmentScripts');\n  var a11ySuiteWillBeLoaded = window.__generatedByWct || scripts.indexOf(a11ySuite) > -1;\n  if (!a11ySuiteWillBeLoaded) {\n    // wct is running as a bower dependency, load a11ySuite from data/\n    scripts.push(a11ySuite);\n  }\n  scripts.forEach(function(path) {\n    var url = util.expandUrl(path, config.get('root'));\n    util.debug('Loading environment script:', url);\n    // Synchronous load.\n    document.write('<script src=\"' + encodeURI(url) + '\"></script>'); // jshint ignore:line\n  });\n  util.debug('Environment scripts loaded');\n\n  var imports = config.get('environmentImports');\n  imports.forEach(function(path) {\n    var url = util.expandUrl(path, config.get('root'));\n    util.debug('Loading environment import:', url);\n    // Synchronous load.\n    document.write('<link rel=\"import\" href=\"' + encodeURI(url) + '\">'); // jshint ignore:line\n  });\n  util.debug('Environment imports loaded');\n}\n\n/**\n * We have some hard dependencies on things that should be loaded via\n * `environmentScripts`, so we assert that they're present here; and do any\n * post-facto setup.\n */\nexport function ensureDependenciesPresent() {\n  _ensureMocha();\n  _checkChai();\n}\n\nfunction _ensureMocha() {\n  var Mocha = window.Mocha;\n  if (!Mocha) {\n    throw new Error('WCT requires Mocha. Please ensure that it is present in WCT.environmentScripts, or that you load it before loading web-component-tester/browser.js');\n  }\n  reporters.injectMocha(Mocha);\n  // Magic loading of mocha's stylesheet\n  var mochaPrefix = util.scriptPrefix('mocha.js');\n  // only load mocha stylesheet for the test runner output\n  // Not the end of the world, if it doesn't load.\n  if (mochaPrefix && window.top === window.self) {\n    util.loadStyle(mochaPrefix + 'mocha.css');\n  }\n}\n\nfunction _checkChai() {\n  if (!window.chai) {\n    util.debug('Chai not present; not registering shorthands');\n    return;\n  }\n\n  window.assert = window.chai.assert;\n  window.expect = window.chai.expect;\n}\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nimport * as config from '../config.js';\n\n// We may encounter errors during initialization (for example, syntax errors in\n// a test file). Hang onto those (and more) until we are ready to report them.\nexport var globalErrors = [];\n\n/**\n * Hook the environment to pick up on global errors.\n */\nexport function listenForErrors() {\n  window.addEventListener('error', function(event) {\n    globalErrors.push(event.error);\n  });\n\n  // Also, we treat `console.error` as a test failure. Unless you prefer not.\n  var origConsole = console;\n  var origError   = console.error;\n  console.error = function wctShimmedError() {\n    origError.apply(origConsole, arguments);\n    if (config.get('trackConsoleError')) {\n      throw 'console.error: ' + Array.prototype.join.call(arguments, ' ');\n    }\n  };\n}\n","\nvar interfaceExtensions = [];\n\n/**\n * Registers an extension that extends the global `Mocha` implementation\n * with new helper methods. These helper methods will be added to the `window`\n * when tests run for both BDD and TDD interfaces.\n */\nexport function extendInterfaces(helperName, helperFactory) {\n  interfaceExtensions.push(function() {\n    var Mocha = window.Mocha;\n    // For all Mocha interfaces (probably just TDD and BDD):\n    Object.keys(Mocha.interfaces).forEach(function(interfaceName) {\n      // This is the original callback that defines the interface (TDD or BDD):\n      var originalInterface = Mocha.interfaces[interfaceName];\n      // This is the name of the \"teardown\" or \"afterEach\" property for the\n      // current interface:\n      var teardownProperty = interfaceName === 'tdd' ? 'teardown' : 'afterEach';\n      // The original callback is monkey patched with a new one that appends to\n      // the global context however we want it to:\n      Mocha.interfaces[interfaceName] = function(suite) {\n        // Call back to the original callback so that we get the base interface:\n        originalInterface.apply(this, arguments);\n        // Register a listener so that we can further extend the base interface:\n        suite.on('pre-require', function(context, file, mocha) {\n          // Capture a bound reference to the teardown function as a convenience:\n          var teardown = context[teardownProperty].bind(context);\n          // Add our new helper to the testing context. The helper is generated\n          // by a factory method that receives the context, the teardown function\n          // and the interface name and returns the new method to be added to\n          // that context:\n          context[helperName] = helperFactory(context, teardown, interfaceName);\n        });\n      };\n    });\n  });\n}\n\n/**\n * Applies any registered interface extensions. The extensions will be applied\n * as many times as this function is called, so don't call it more than once.\n */\nexport function applyExtensions() {\n  interfaceExtensions.forEach(function(applyExtension) {\n    applyExtension();\n  });\n}\n","import { extendInterfaces } from './extend';\n\nextendInterfaces('fixture', function(context, teardown) {\n\n  // Return context.fixture if it is already a thing, for backwards\n  // compatibility with `test-fixture-mocha.js`:\n  return context.fixture || function fixture(fixtureId, model) {\n\n    // Automatically register a teardown callback that will restore the\n    // test-fixture:\n    teardown(function() {\n      document.getElementById(fixtureId).restore();\n    });\n\n    // Find the test-fixture with the provided ID and create it, returning\n    // the results:\n    return document.getElementById(fixtureId).create(model);\n  };\n});\n","import { extendInterfaces } from './extend';\n\n/**\n * stub\n *\n * The stub addon allows the tester to partially replace the implementation of\n * an element with some custom implementation. Usage example:\n *\n * beforeEach(function() {\n *   stub('x-foo', {\n *     attached: function() {\n *       // Custom implementation of the `attached` method of element `x-foo`..\n *     },\n *     otherMethod: function() {\n *       // More custom implementation..\n *     },\n *     // etc..\n *   });\n * });\n */\nextendInterfaces('stub', function(context, teardown) {\n\n  return function stub(tagName, implementation) {\n    // Find the prototype of the element being stubbed:\n    var proto = document.createElement(tagName).constructor.prototype;\n\n    // For all keys in the implementation to stub with..\n    var keys = Object.keys(implementation);\n    keys.forEach(function(key) {\n      // Stub the method on the element prototype with Sinon:\n      sinon.stub(proto, key, implementation[key]);\n    });\n\n    // After all tests..\n    teardown(function() {\n      // For all of the keys in the implementation we stubbed..\n      keys.forEach(function(key) {\n        // Restore the stub:\n        if (proto[key].isSinonProxy) {\n          proto[key].restore();\n        }\n      });\n    });\n  };\n});\n","import { extendInterfaces } from './extend';\n\n/**\n * replace\n *\n * The replace addon allows the tester to replace all usages of one element with\n * another element within all Polymer elements created within the time span of\n * the test. Usage example:\n *\n * beforeEach(function() {\n *   replace('x-foo').with('x-fake-foo');\n * });\n *\n * All annotations and attributes will be set on the placement element the way\n * they were set for the original element.\n */\nextendInterfaces('replace', function(context, teardown) {\n  return function replace(oldTagName) {\n    return {\n      with: function(tagName) {\n        // Keep a reference to the original `Polymer.Base.instanceTemplate`\n        // implementation for later:\n        var originalInstanceTemplate = Polymer.Base.instanceTemplate;\n\n        // Use Sinon to stub `Polymer.Base.instanceTemplate`:\n        sinon.stub(Polymer.Base, 'instanceTemplate', function(template) {\n          // The DOM to replace is the result of calling the \"original\"\n          // `instanceTemplate` implementation:\n          var dom = originalInstanceTemplate.apply(this, arguments);\n\n          // The nodes to replace are queried from the DOM chunk:\n          var nodes = Array.prototype.slice.call(dom.querySelectorAll(oldTagName));\n\n          // For all of the nodes we want to place...\n          nodes.forEach(function(node) {\n\n            // Create a replacement:\n            var replacement = document.createElement(tagName);\n\n            // For all attributes in the original node..\n            for (var index = 0; index < node.attributes.length; ++index) {\n              // Set that attribute on the replacement:\n              replacement.setAttribute(\n                node.attributes[index].name, node.attributes[index].value);\n            }\n\n            // Replace the original node with the replacement node:\n            node.parentNode.replaceChild(replacement, node);\n          });\n\n          return dom;\n        });\n\n        // After each test...\n        teardown(function() {\n          // Restore the stubbed version of `Polymer.Base.instanceTemplate`:\n          if (Polymer.Base.instanceTemplate.isSinonProxy) {\n            Polymer.Base.instanceTemplate.restore();\n          }\n        });\n      }\n    };\n  };\n});\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nimport * as config from './config.js';\n\nimport './mocha/fixture.js';\nimport './mocha/stub.js';\nimport './mocha/replace.js';\nimport { applyExtensions } from './mocha/extend.js';\n\n// Mocha global helpers, broken out by testing method.\n//\n// Keys are the method for a particular interface; values are their analog in\n// the opposite interface.\nvar MOCHA_EXPORTS = {\n  // https://github.com/visionmedia/mocha/blob/master/lib/interfaces/tdd.js\n  tdd: {\n    'setup':         '\"before\"',\n    'teardown':      '\"after\"',\n    'suiteSetup':    '\"beforeEach\"',\n    'suiteTeardown': '\"afterEach\"',\n    'suite':         '\"describe\" or \"context\"',\n    'test':          '\"it\" or \"specify\"',\n  },\n  // https://github.com/visionmedia/mocha/blob/master/lib/interfaces/bdd.js\n  bdd: {\n    'before':     '\"setup\"',\n    'after':      '\"teardown\"',\n    'beforeEach': '\"suiteSetup\"',\n    'afterEach':  '\"suiteTeardown\"',\n    'describe':   '\"suite\"',\n    'context':    '\"suite\"',\n    'xdescribe':  '\"suite.skip\"',\n    'xcontext':   '\"suite.skip\"',\n    'it':         '\"test\"',\n    'xit':        '\"test.skip\"',\n    'specify':    '\"test\"',\n    'xspecify':   '\"test.skip\"',\n  },\n};\n\n/**\n * Exposes all Mocha methods up front, configuring and running mocha\n * automatically when you call them.\n *\n * The assumption is that it is a one-off (sub-)suite of tests being run.\n */\nexport function stubInterfaces() {\n  Object.keys(MOCHA_EXPORTS).forEach(function(ui) {\n    Object.keys(MOCHA_EXPORTS[ui]).forEach(function(key) {\n      window[key] = function wrappedMochaFunction() {\n        _setupMocha(ui, key, MOCHA_EXPORTS[ui][key]);\n        if (!window[key] || window[key] === wrappedMochaFunction) {\n          throw new Error('Expected mocha.setup to define ' + key);\n        }\n        window[key].apply(window, arguments);\n      };\n    });\n  });\n}\n\n// Whether we've called `mocha.setup`\nvar _mochaIsSetup = false;\n\n/**\n * @param {string} ui Sets up mocha to run `ui`-style tests.\n * @param {string} key The method called that triggered this.\n * @param {string} alternate The matching method in the opposite interface.\n */\nfunction _setupMocha(ui, key, alternate) {\n  var mochaOptions = config.get('mochaOptions');\n  if (mochaOptions.ui && mochaOptions.ui !== ui) {\n    var message = 'Mixing ' + mochaOptions.ui + ' and ' + ui + ' Mocha styles is not supported. ' +\n                  'You called \"' + key + '\". Did you mean ' + alternate + '?';\n    throw new Error(message);\n  }\n  if (_mochaIsSetup) return;\n\n  applyExtensions();\n  mochaOptions.ui = ui;\n  mocha.setup(mochaOptions);  // Note that the reporter is configured in run.js.\n}\n\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nimport ChildRunner from './childrunner.js';\nimport * as util   from './util.js';\n\nvar SOCKETIO_ENDPOINT = window.location.protocol + '//' + window.location.host;\nvar SOCKETIO_LIBRARY  = SOCKETIO_ENDPOINT + '/socket.io/socket.io.js';\n\n/**\n * A socket for communication between the CLI and browser runners.\n *\n * @param {string} browserId An ID generated by the CLI runner.\n * @param {!io.Socket} socket The socket.io `Socket` to communicate over.\n */\nexport default function CLISocket(browserId, socket) {\n  this.browserId = browserId;\n  this.socket    = socket;\n}\n\n/**\n * @param {!Mocha.Runner} runner The Mocha `Runner` to observe, reporting\n *     interesting events back to the CLI runner.\n */\nCLISocket.prototype.observe = function observe(runner) {\n  this.emitEvent('browser-start', {\n    url: window.location.toString(),\n  });\n\n  // We only emit a subset of events that we care about, and follow a more\n  // general event format that is hopefully applicable to test runners beyond\n  // mocha.\n  //\n  // For all possible mocha events, see:\n  // https://github.com/visionmedia/mocha/blob/master/lib/runner.js#L36\n  runner.on('test', function(test) {\n    this.emitEvent('test-start', {test: getTitles(test)});\n  }.bind(this));\n\n  runner.on('test end', function(test) {\n    this.emitEvent('test-end', {\n      state:    getState(test),\n      test:     getTitles(test),\n      duration: test.duration,\n      error:    test.err,\n    });\n  }.bind(this));\n\n  runner.on('childRunner start', function(childRunner) {\n    this.emitEvent('sub-suite-start', childRunner.share);\n  }.bind(this));\n\n  runner.on('childRunner end', function(childRunner) {\n    this.emitEvent('sub-suite-end', childRunner.share);\n  }.bind(this));\n\n  runner.on('end', function() {\n    this.emitEvent('browser-end');\n  }.bind(this));\n};\n\n/**\n * @param {string} event The name of the event to fire.\n * @param {*} data Additional data to pass with the event.\n */\nCLISocket.prototype.emitEvent = function emitEvent(event, data) {\n  this.socket.emit('client-event', {\n    browserId: this.browserId,\n    event:     event,\n    data:      data,\n  });\n};\n\n/**\n * Builds a `CLISocket` if we are within a CLI-run environment; short-circuits\n * otherwise.\n *\n * @param {function(*, CLISocket)} done Node-style callback.\n */\nCLISocket.init = function init(done) {\n  var browserId = util.getParam('cli_browser_id');\n  if (!browserId) return done();\n  // Only fire up the socket for root runners.\n  if (ChildRunner.current()) return done();\n\n  util.loadScript(SOCKETIO_LIBRARY, function(error) {\n    if (error) return done(error);\n\n    var socket = io(SOCKETIO_ENDPOINT);\n    socket.on('error', function(error) {\n      socket.off();\n      done(error);\n    });\n\n    socket.on('connect', function() {\n      socket.off();\n      done(null, new CLISocket(browserId, socket));\n    });\n  });\n};\n\n// Misc Utility\n\n/**\n * @param {!Mocha.Runnable} runnable The test or suite to extract titles from.\n * @return {!Array.<string>} The titles of the runnable and its parents.\n */\nfunction getTitles(runnable) {\n  var titles = [];\n  while (runnable && !runnable.root && runnable.title) {\n    titles.unshift(runnable.title);\n    runnable = runnable.parent;\n  }\n  return titles;\n}\n\n/**\n * @param {!Mocha.Runnable} runnable\n * @return {string}\n */\nfunction getState(runnable) {\n  if (runnable.state === 'passed') {\n    return 'passing';\n  } else if (runnable.state == 'failed') {\n    return 'failing';\n  } else if (runnable.pending) {\n    return 'pending';\n  } else {\n    return 'unknown';\n  }\n}\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n// Make sure that we use native timers, in case they're being stubbed out.\nvar setInterval           = window.setInterval;           // jshint ignore:line\nvar setTimeout            = window.setTimeout;            // jshint ignore:line\nvar requestAnimationFrame = window.requestAnimationFrame; // jshint ignore:line\n\n/**\n * Runs `stepFn`, catching any error and passing it to `callback` (Node-style).\n * Otherwise, calls `callback` with no arguments on success.\n *\n * @param {function()} callback\n * @param {function()} stepFn\n */\nwindow.safeStep = function safeStep(callback, stepFn) {\n  var err;\n  try {\n    stepFn();\n  } catch (error) {\n    err = error;\n  }\n  callback(err);\n};\n\n/**\n * Runs your test at declaration time (before Mocha has begun tests). Handy for\n * when you need to test document initialization.\n *\n * Be aware that any errors thrown asynchronously cannot be tied to your test.\n * You may want to catch them and pass them to the done event, instead. See\n * `safeStep`.\n *\n * @param {string} name The name of the test.\n * @param {function(?function())} testFn The test function. If an argument is\n *     accepted, the test will be treated as async, just like Mocha tests.\n */\nwindow.testImmediate = function testImmediate(name, testFn) {\n  if (testFn.length > 0) {\n    return testImmediateAsync(name, testFn);\n  }\n\n  var err;\n  try {\n    testFn();\n  } catch (error) {\n    err = error;\n  }\n\n  test(name, function(done) {\n    done(err);\n  });\n};\n\n/**\n * An async-only variant of `testImmediate`.\n *\n * @param {string} name\n * @param {function(?function())} testFn\n */\nwindow.testImmediateAsync = function testImmediateAsync(name, testFn) {\n  var testComplete = false;\n  var err;\n\n  test(name, function(done) {\n    var intervalId = setInterval(function() {\n      if (!testComplete) return;\n      clearInterval(intervalId);\n      done(err);\n    }, 10);\n  });\n\n  try {\n    testFn(function(error) {\n      if (error) err = error;\n      testComplete = true;\n    });\n  } catch (error) {\n    err = error;\n    testComplete = true;\n  }\n};\n\n/**\n * Triggers a flush of any pending events, observations, etc and calls you back\n * after they have been processed.\n *\n * @param {function()} callback\n */\nwindow.flush = function flush(callback) {\n  // Ideally, this function would be a call to Polymer.dom.flush, but that doesn't\n  // support a callback yet (https://github.com/Polymer/polymer-dev/issues/851),\n  // ...and there's cross-browser flakiness to deal with.\n\n  // Make sure that we're invoking the callback with no arguments so that the\n  // caller can pass Mocha callbacks, etc.\n  var done = function done() { callback(); };\n\n  // Because endOfMicrotask is flaky for IE, we perform microtask checkpoints\n  // ourselves (https://github.com/Polymer/polymer-dev/issues/114):\n  var isIE = navigator.appName == 'Microsoft Internet Explorer';\n  if (isIE && window.Platform && window.Platform.performMicrotaskCheckpoint) {\n    var reallyDone = done;\n    done = function doneIE() {\n      Platform.performMicrotaskCheckpoint();\n      setTimeout(reallyDone, 0);\n    };\n  }\n\n  // Everyone else gets a regular flush.\n  var scope;\n  if (window.Polymer && window.Polymer.dom && window.Polymer.dom.flush) {\n    scope = window.Polymer.dom;\n  } else if (window.Polymer && window.Polymer.flush) {\n    scope = window.Polymer;\n  } else if (window.WebComponents && window.WebComponents.flush) {\n    scope = window.WebComponents;\n  }\n  if (scope) {\n    scope.flush();\n  }\n\n  // Ensure that we are creating a new _task_ to allow all active microtasks to\n  // finish (the code you're testing may be using endOfMicrotask, too).\n  setTimeout(done, 0);\n};\n\n/**\n * Advances a single animation frame.\n *\n * Calls `flush`, `requestAnimationFrame`, `flush`, and `callback` sequentially\n * @param {function()} callback\n */\nwindow.animationFrameFlush = function animationFrameFlush(callback) {\n  flush(function() {\n    requestAnimationFrame(function() {\n      flush(callback);\n    });\n  });\n};\n\n/**\n * DEPRECATED: Use `flush`.\n * @param {function} callback\n */\nwindow.asyncPlatformFlush = function asyncPlatformFlush(callback) {\n  console.warn('asyncPlatformFlush is deprecated in favor of the more terse flush()');\n  return window.flush(callback);\n};\n\n/**\n *\n */\nwindow.waitFor = function waitFor(fn, next, intervalOrMutationEl, timeout, timeoutTime) {\n  timeoutTime = timeoutTime || Date.now() + (timeout || 1000);\n  intervalOrMutationEl = intervalOrMutationEl || 32;\n  try {\n    fn();\n  } catch (e) {\n    if (Date.now() > timeoutTime) {\n      throw e;\n    } else {\n      if (isNaN(intervalOrMutationEl)) {\n        intervalOrMutationEl.onMutation(intervalOrMutationEl, function() {\n          waitFor(fn, next, intervalOrMutationEl, timeout, timeoutTime);\n        });\n      } else {\n        setTimeout(function() {\n          waitFor(fn, next, intervalOrMutationEl, timeout, timeoutTime);\n        }, intervalOrMutationEl);\n      }\n      return;\n    }\n  }\n  next();\n};\n","/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n/**\n * This file is the entry point into `web-component-tester`'s browser client.\n */\nimport * as config      from './config.js';\nimport * as environment from './environment.js';\nimport * as errors      from './environment/errors.js';\nimport * as mocha       from './mocha';\nimport * as reporters   from './reporters';\nimport * as suites      from './suites.js';\nimport * as util        from './util.js';\nimport CLISocket        from './clisocket.js';\nimport ChildRunner      from './childrunner.js';\nimport MultiReporter    from './reporters/multi.js';\n// Registers a bunch of globals:\nimport './environment/helpers.js';\n\n// You can configure WCT before it has loaded by assigning your custom\n// configuration to the global `WCT`.\nconfig.setup(window.WCT);\n\n// Maybe some day we'll expose WCT as a module to whatever module registry you\n// are using (aka the UMD approach), or as an es6 module.\nvar WCT = window.WCT = {};\n// A generic place to hang data about the current suite. This object is reported\n// back via the `sub-suite-start` and `sub-suite-end` events.\nWCT.share = {};\n// Until then, we get to rely on it to expose parent runners to their children.\nWCT._ChildRunner = ChildRunner;\nWCT._config      = config._config;\n\n\n// Public Interface\n\n/**\n * Loads suites of tests, supporting both `.js` and `.html` files.\n *\n * @param {!Array.<string>} files The files to load.\n */\nWCT.loadSuites = suites.loadSuites;\n\n\n// Load Process\n\nerrors.listenForErrors();\nmocha.stubInterfaces();\nenvironment.loadSync();\n\n// Give any scripts on the page a chance to declare tests and muck with things.\ndocument.addEventListener('DOMContentLoaded', function() {\n  util.debug('DOMContentLoaded');\n\n  environment.ensureDependenciesPresent();\n\n  // We need the socket built prior to building its reporter.\n  CLISocket.init(function(error, socket) {\n    if (error) throw error;\n\n    // Are we a child of another run?\n    var current = ChildRunner.current();\n    var parent  = current && current.parentScope.WCT._reporter;\n    util.debug('parentReporter:', parent);\n\n    var childSuites    = suites.activeChildSuites();\n    var reportersToUse = reporters.determineReporters(socket, parent);\n    // +1 for any local tests.\n    var reporter = new MultiReporter(childSuites.length + 1, reportersToUse, parent);\n    WCT._reporter = reporter; // For environment/compatibility.js\n\n    // We need the reporter so that we can report errors during load.\n    suites.loadJsSuites(reporter, function(error) {\n      // Let our parent know that we're about to start the tests.\n      if (current) current.ready(error);\n      if (error) throw error;\n\n      // Emit any errors we've encountered up til now\n      errors.globalErrors.forEach(function onError(error) {\n        reporter.emitOutOfBandTest('Test Suite Initialization', error);\n      });\n\n      suites.runSuites(reporter, childSuites, function(error) {\n        // Make sure to let our parent know that we're done.\n        if (current) current.done();\n        if (error) throw error;\n      });\n    });\n  });\n});\n"],"names":["config.get","util.paramsToQuery","util.getParams","util.mergeParams","util.parseUrl","util.debug","util.basePath","util.scriptPrefix","htmlSuites","jsSuites","util.getParam","util.cleanLocation","util.parallel","util.loadScript","util.whenFrameworksReady","console","util.pluralizedStat","util.relativeLocation","HTMLReporter","suites.jsSuites","suites.htmlSuites","ConsoleReporter","TitleReporter","util.expandUrl","util.loadStyle","reporters.injectMocha","setTimeout","config.setup","config._config","suites.loadSuites","errors.listenForErrors","mocha.stubInterfaces","environment.loadSync","suites.runSuites","errors.globalErrors","suites.loadJsSuites","reporters.determineReporters","suites.activeChildSuites","environment.ensureDependenciesPresent"],"mappings":"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"}